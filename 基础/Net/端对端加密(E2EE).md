

# 端对端加密(E2EE)


![img](https:////upload-images.jianshu.io/upload_images/13201796-de160ff00062e103.png!small?imageMogr2/auto-orient/strip|imageView2/2/w/690)

Clipboard Image.png



## 什么是端到端加密？

**实际上，我们可以将端到端加密（E2EE）视作一种目前比较安全的通信系统。在这个系统中，只有参与通信的双方用户可以读取通信数据。不仅网络犯罪分子无法窃听到这种通信信息，甚至连互联网服务提供商、通信服务提供商、以及电信服务提供商都无法获取到这类通信数据。**

除此之外，端到端加密还可以防止攻击者轻易地获取到用于解密通信会话的加密密钥。这种通信系统可以有效地防止攻击者对用户的通信数据进行拦截或窃听，而且如果攻击者想要篡改通信内容的话，几乎也是一件不太可能完成的任务。这也就意味着，那些在文字聊天服务中采用了端到端加密的公司无法将客户的聊天内容转交给某些特殊的情报机构。

![img](https:////upload-images.jianshu.io/upload_images/13201796-9964c0c23875b8d8.png!small?imageMogr2/auto-orient/strip|imageView2/2/w/690)

Clipboard Image.png

当我们需要将某些数据从一个源地址发送到目的地址时，我们就可以使用端到端加密技术来保证加密数据的安全传输。端到端加密的主要优势是在Web层就可以对数据进行加密处理，然后在数据接收端的数据库或者应用服务器层解密出明文数据。如果在实现端到端加密的过程中，我们使用的是安全级别较高的加密算法，那么这样就可以确保传输数据能够得到最高级别的安全保护。

在实现端到端机密的过程中，发起加密操作的永远是源设备的用户，这样可以最大程度地体现出这项技术的灵活性，因为用户可以自主选择需要对哪部分数据进行加密。但是，在端到端加密的过程中，类似IP地址和路由信息这样的细节数据是无法进行加密处理的。

### 端到端加密的优势在哪里？

![img](https:////upload-images.jianshu.io/upload_images/13201796-cc9e4f2a9610c190.png!small?imageMogr2/auto-orient/strip|imageView2/2/w/690)

Clipboard Image.png

> 1.在用户需要对敏感数据加密的情况下，“有选择性地加密”将会大幅提升加密的灵活性，用户可以根据自己的情况来选择需要进行加密的数据。
>
> 2.用户可以对端到端加密的实现过程进行自定义配置，这将有助于实现功能的高度模块化，并提升加密模块的内聚性。
>
> 3.在整个加密过程中所涉及到的文件量是非常小的，所以加密过程所占用的资源量并不大，而且加密时间也不会太久。
>
> 接下来，让我们来了解一下什么是高级加密标准（AES）。



## 高级加密标准（AES）

高级加密标准（AES）在密码学中又称Rijndael加密算法，AES是美国联邦政府采用的一种区块加密标准。这个标准的设计目标是为了替代原先的DES，目前该标准已经经过了大量安全研究专家的分析，并且在全世界范围内得到了广泛使用。经过五年的甄选流程，高级加密标准由美国国家标准与技术研究院（NIST）于2001年11月26日发布于FIPSPUB 197，并在2002年5月26日成为有效的加密标准。2006年，高级加密标准（AES）已然成为对称密钥加密中最流行的算法之一。

下图所示的是一个简单的AES加密流程：

![img](https:////upload-images.jianshu.io/upload_images/13201796-73bd3cf208275247.png!small?imageMogr2/auto-orient/strip|imageView2/2/w/690)

Clipboard Image.png

接下来，我们将通过下面的问答环节来向大家介绍有关高级加密标准的内容。

### 问题一：AES加密到底是什么？

AES加密算法是一种对称加密算法，该算法由比利时密码学家JoanDaemen和VincentRijmen共同设计，结合两位作者的名字，所以得名“Rijndael”加密算法。

AES加密专门用于对电子数据进行加密。毫无疑问，在需要采用信息加密技术的各种聊天应用程序中，AES加密算法肯定是它们的首选。除此之外，AES加密算法可以使用128位、192位、或者256位长度的密钥来对文字数据进行加密和解密。

### 问题二：AES加密算法的强大之处到底在哪？

当你需要发送敏感信息和凭证数据时，AES加密和解密算法可以保证传输数据的安全。它可以将机密数据加密成一种可被解密的形式，但是只有当你手握正确的解密密码时，你才能够对其进行解密。

### 问题三：AES加密算法到底有多安全？

AES加密算法是一种非常安全的加密方式，美国政府一直都在使用这种加密算法来加密敏感数据。



## Diffie-Hellman密钥交换算法

简而言之，Diffie-Hellman是一种确保共享密钥安全通过不安全网络的一种方法。包括AES加密算法在内的对称加密算法可以使用这种方式来交换加密密钥。需要安全通信的双方可以用这个方法确定对称密钥，然后可以用这个密钥来进行数据的加密和解密。但是请注意，这个密钥交换算法只能用于密钥的交换，而不能进行消息的加密和解密。当通信双方确定了需要使用的密钥后，要使用其他对称加密算法来进行实际的加密和解密操作。

还有一种匿名密钥交换协议，即椭圆曲线Diffie-Hellman（ECDH）。通过椭圆曲线Diffie-Hellman (ECDH) 密钥协商协议，两个用户可以创建共享的机密协议。他们可以在不安全的公共媒体上完成此操作，而不必事先交换任何私有信息。该共享机密协议通常用于派生密钥材料。对称算法（例如高级加密标准（AES）算法）可以使用这份密钥材料来对后续消息进行加密

![img](https://upload-images.jianshu.io/upload_images/13201796-f572640422a4742e.png!small?imageMogr2/auto-orient/strip|imageView2/2/w/690)

### 为什么需要ECDH密钥交换算法？

即便是没有ECDH，我们的AES加密算法依然可以正常工作。但问题就是，我们还需要自己去处理通信双方的私钥问题。因此，我们需要将密钥硬编码至.apk文件当中，但此时的密钥是可以通过对apk文件进行反编译来获取到的。因此，为了避免这种情况的发生，我们需要使用ECDH密钥交换算法来帮助我们进行密钥的交换操作。

其实这也很好解释，假如现在A需要与B进行通信，那么此时就要生成一个只有他们双方自己知道的密钥。当A要与C（新的通信对象）进行通信时，又要单独生成另外一个密钥。这就是端到端加密的实现方式，你可以将其想象成一种通信专线的形式。也就是说，假如你要和一百个不同的人聊天，那么此时就会存在一百条私人通信信道。



[**参考**](https://www.jianshu.com/p/0fbb56d3c4d7)

