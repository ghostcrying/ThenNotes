# 基础



##### 面向对象编程

> 面向对象的设计和面向协议的设计都使用了多态让我们使用同样的接口来跟不同的类型进行交互。在面向对象的设计中，我们使用了基类提供的接口来跟所有的子类进行交互

##### 面向协议编程

> 在面向协议的设计中，我们使用了协议和协议扩展提供的接口来跟遵守该协议的类型进行交互
>
> **优势**
>
> - 降低了代码的耦合度
>
> - 类可以遵守多个协议而只能拥有一个基类。因此可以创建很多个协议以添加每个特定的功能而不是把所有功能都写到一个巨大的类中
> - 协议不需要源代码就可使用协议扩展添加功能, 因此可以扩展任何协议, 即使是swift自己内建的协议也可扩展.
>   - 而给超类添加功能我们需要知道源代码。我们可以使用扩展给超类添加功能，这意味着所有的子类会继承那个功能。然而，我们一般使用扩展来为特定的类添加功能而非为类的层级添加功能
>
> - 协议可以被类、结构体和枚举遵守，而类层级被约束为类类型 (协议/协议扩展让我们可以在尽可能合理的地方使用值类型)



#### Class & Struct

> swift中, class是引用类型, struct是值类型, 值类型在传递和赋值时将进行复制, 而引用类型只会使用引用对象的一个指向; 
>
> 引用类型是在堆上, 而值类型是在栈上进行传递与操作,相比栈上的操作,堆上面的操作更加复杂耗时,推荐使用struct

- class
  - 可以被继承
  - 类型转换可以在runtime的时候进行类型检查
  - 类释放前调用析构方法(deinit)可以手动释放...
  - 可以被多次使用
  
- struct
  - 结构体较小,适用于复制操作, 相比于class实例被多次引用更加安全
  
  - 无需担心内存泄露与多线程冲突问题
  
  - C语言中的struct只是一种数据变量, 且内部不能定义成员函数, 但是swift中任何操作都可以
  
    

#### Swift为什么将string\array\dict设计为值类型

- 值类型和引用类型相比, 最大优势在于高效的使用内存
- 值类型是在栈上操作, 仅仅是单个指针的移动
- 引用类型是在堆上操作, 牵涉合并\位移\重链接
- swift这样设计减少了堆上内存分配和回收次数, 使用copy-on-write将值传递与复制开销降到最低



#### 特点

- 与函数指针统一的闭包
- 元组和多个返回值
- 泛型
- 对范围或集合进行快速简洁的迭代
- 结构体支持 方法、扩展、协议
- 函数式编程模式 例如map 和 filter
- 内置强大的错误处理功能
- 带有 do，guard，defer，repeat 关键字的强大控制流
- 不再依赖OC的运行时机制



#### 安全

Swift 从一开始就设计的比基于C语言的 OC 代码更加安全，并且消除了所有不安全代码。

- 变量在使用之前会被初始化

- 数组和整数会自动检查是否溢出

- 自动管理内存，oc中ARC只会自动管理NSObject对象引用计数，但是对于CF对象是不能管理的，但是swift 却不用处理CF对象内存管理的情况。

- 语法更加简洁，例如 变量用 var，常量用 let

- 默认情况下，swift 对象不可能为 nil，尝试创建或者使用nil 对象，会导致编译时错误，这使得编写代码更干净更安全，避免了运行时崩溃的一个常见原因。
  然而有的情况下，nil 对象是被期望出现的，针对此情况，swift有个新的特性 为可选类型`optionals`,一个 `optional`类型的对象，可能包含nil，但是swift语法会强制你使用`?`来处理这种情况，也就是 声明一个'optional'类型，类型后面要加`?`

  ```
  # 声明了一个name 变量，为字符串可选类型（name 可能为nil,也可能是一个确定的字符串）
  var name: String? 
  ```

  

**[参考](https://coder-star.github.io/iOS/Swift/从SIL角度看Swift中的值类型与引用类型/)**
